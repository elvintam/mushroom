---
title: 'Data Science: Capstone CYO Project - Mushroom'
author: "Elvin Tam"
date: "15 May 2021"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r package_data, include=FALSE}
if(!require(tidyverse)) install.packages("tidyverse", repos = "http://cran.us.r-project.org")
if(!require(caret)) install.packages("caret", repos = "http://cran.us.r-project.org")
if(!require(data.table)) install.packages("data.table", repos = "http://cran.us.r-project.org")
if(!require(DataExplorer)) install.packages("DataExplorer", repos = "http://cran.us.r-project.org")

library(tidyverse)
library(caret)
library(data.table)
library(DataExplorer)
library(knitr)

ifelse(file.exists(".\\data\\agaricus-lepiota.data"),
  { 
    dl <- ".\\data\\agaricus-lepiota.data"
  },
  {
    dl <- tempfile()
    download.file("https://archive.ics.uci.edu/ml/machine-learning-databases/mushroom/agaricus-lepiota.data", dl)
  })

mushroom <- fread(text = readLines(dl), header = FALSE, stringsAsFactors = TRUE,
                 col.names = c(
                   "class","cap_shape",
                   "cap_surface","cap_color",
                   "bruises","odor","gill_attachment",
                   "gill_spacing","gill_size","gill_color",
                   "stalk_shape","stalk_root","stalk_surface_above_ring",
                   "stalk_surface_below_ring","stalk_color_above_ring",
                   "stalk_color_below_ring","veil_type","veil_color",
                   "ring_number","ring_type","spore_print_color",
                   "population","habitat"))

mushroom <- as.data.frame(mushroom)
rm(dl)
```

```{r mushroompic, echo = FALSE}
# All defaults
include_graphics("mushroom.jpg")
```
CREDIT: GETTY IMAGES

# Introduction

In this report, our goal is to predict the edibility (class: edible / poisonous) of mushroom basing on attribution information. Data set includes descriptions of hypothetical samples corresponding to 23 species of gilled mushrooms in the Agaricus and Lepiota Family (pp. 500-525). The reason of selecting this dataset is that this problem is related to classification which is a large part of application in data science. And, it is also a complement to project – MovieLens that we can cover each part of what we have learnt from the course.

The mushroom dataset has already been well formatted. Process of data cleaning is only removing 2 attributes prior to splitting the data to training set and test set. 10 algorithms are applied and an ensemble model combining the prior 10 different algorithms to see if it can provide improvement to our predictions.  

1.	glm
2.	lda
3.	Naïve Bayes
4.	svmLinear
5.	classification
6.	knn
7.	gamLoess
8.	multinom
9.	rf
10.	adaboost
11.	ensemble

## 1. Data Cleaning

Mushroom data set contains 23 columns of 1 class and 22 attributes related to cap, bruises, odor, gill, stalk, veil, ring, spore color, population and habitat of 8,124 observations. 

```{r str, echo=FALSE}
str(mushroom)
summary(mushroom)
```

According to description from the source, there is data missing in the attribute of stalk root. The missing data point is marked “?” from the source already. Veil type is reported 1 level only. As a result, both stalk root and veil type are removed before we start data exploration & modeling.

```{r remove, echo=TRUE}
mushroom <- mushroom %>% select(-veil_type, -stalk_root)
```

## 2. Data Exploration

We use Data Explorer package to do data exploration. By using this package, it provides a standardized method for illustrating the data.

From below 2 charts, we can see that the mushroom data is discrete with no data missing.

```{r dataExplorer1, echo=FALSE}
plot_intro(mushroom)
plot_missing(mushroom)
```

talk about frequency & correlation

class edible poisonalbe

As we can see, both classes are equally distributed and balanced.

gill_attachment, gill_spacing, veil_color, ring_number


veil-type: is a constant variable so we can delete it
odor: is highly correlated with the class so we should take care
correlation: there is high correlation between veil-color, gill-attachment and stalk-color-above-ring


```{r dataExplorer2, echo=FALSE}

plot_bar(mushroom, nrow = 3L, ncol = 4L)

plot_bar(mushroom, by = "class", nrow = 3L, ncol = 4L)

plot_correlation(mushroom, maxcat = 5L)
```

## 3. Modeling Approach





So among all classification model Random Forest Classification has highest accuracy score = 99.75%.

# Result
a results section that presents the modeling results and discusses the model performance

# Conclusion
a conclusion section that gives a brief summary of the report, its limitations and future work
